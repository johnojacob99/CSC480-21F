{"ast":null,"code":"var _jsxFileName = \"/home/ductran/Desktop/CSC480-21F/frontend/src/main/frontend/src/pages/Student/StudentPeerReviewResultsDisplay.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\"; // @mui components\n\nimport { CardContent, Grid, List, Stack, Typography, Box, CardHeader } from \"@mui/material\"; //PDF\n\nimport { Document, Page, pdfjs } from \"react-pdf\"; // styled components\n\nimport NavBar from \"../../components/NavBar/NavBar\";\nimport CustomizedButtons from \"../../components/CustomizedButtons\";\nimport bg from \"../../images/multi_background_dashboard.jpg\";\nimport CustomizedCard from \"../../components/CustomizedCard\";\nimport CustomizedContainer from \"../../components/CustomizedContainer\";\nimport { Link } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectUser } from \"../../features/userSlice\";\nimport Loading from \"../../components/Loading\";\nimport CustomizedPdfUploader from \"../../components/CustomizedPdfUploader\";\nimport CustomizedBody from \"../../components/CustomizedBody\";\nimport CustomizedTabs from \"../../components/CustomizedTabs\";\nimport { getPeerReviewResulttByStudent } from \"../../axios/APIRequests\";\nimport { handleConvertByteArrayToPdf } from \"../../utils/byteArrayToPDF\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction TabPanel(props) {\n  const {\n    children,\n    value,\n    index,\n    ...other\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    sx: {\n      borderRadius: \"10px\"\n    },\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: `simple-tabpanel-${index}`,\n    \"aria-labelledby\": `simple-tab-${index}`,\n    ...other,\n    children: value === index && /*#__PURE__*/_jsxDEV(Box, {\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 27\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n}\n\n_c = TabPanel;\n\nfunction StudentPeerReviewResultsDisplay({\n  history,\n  location\n}) {\n  _s();\n\n  const dispatch = useDispatch();\n  const getUser = useSelector(selectUser);\n  const {\n    user,\n    isAuthenticated,\n    authLoading\n  } = getUser;\n  const [scale, setScale] = useState(1.0);\n  const [numPages, setNumPages] = useState(null);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [isLoading, setIsLoading] = useState(true);\n  const [loading, setLoading] = useState(true);\n  const isFirstPage = pageNumber === 1;\n  const isLastPage = pageNumber === numPages;\n  const [tab, setTab] = useState(0); // ========= main variable =======\n\n  const [comments, setComments] = React.useState(\"\");\n  const [assignment, setAssignment] = useState();\n  const [submissionPdfFile, setSubmissionPdfFile] = useState(null);\n  const [peerReviewResult, setPeerReviewResult] = useState();\n  const [linkDownload, setLinkDownload] = useState();\n  useEffect(() => {\n    if (location.state.assignmentID == undefined) return;\n    var assignmentID = location.state.assignmentID;\n    getPeerReviewResulttByStudent(assignmentID).then(value => {\n      console.log(value);\n\n      if (peerReviewResult === undefined) {\n        setPeerReviewResult(value);\n      }\n\n      setLoading(false);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n  useEffect(() => {\n    if (peerReviewResult !== undefined) {\n      //console.log(peerReviewResult.peerReview[tab].pdfDoc)\n      setLinkDownload(handleConvertByteArrayToPdf(peerReviewResult.peerReview[tab].pdfDoc));\n    }\n  }, [peerReviewResult, tab]); // for submit event\n\n  function onDocumentLoadSuccess({\n    numPages\n  }) {\n    setNumPages(numPages);\n    setIsLoading(false);\n  }\n\n  const goToPreviousPage = () => {\n    if (!isFirstPage) setPageNumber(pageNumber - 1);\n  };\n\n  const goToNextPage = () => {\n    if (!isLastPage) setPageNumber(pageNumber + 1);\n  };\n\n  return /*#__PURE__*/_jsxDEV(CustomizedBody, {\n    bg: bg,\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {\n      fixed: true,\n      history: history\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), loading === true ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(CustomizedContainer, {\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          sx: {\n            marginBottom: \"20px\",\n            display: \"flex\",\n            alignItems: \"center\"\n          },\n          spacing: 9,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 9,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              style: {\n                display: \"flex\",\n                textAlign: \"center\",\n                fontWeight: \"600\"\n              },\n              variant: \"h6\",\n              component: \"div\",\n              children: \"Peer Review Results\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CustomizedCard, {\n          style: {\n            marginTop: \"20px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: /*#__PURE__*/_jsxDEV(Stack, {\n              direction: \"row\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\",\n              spacing: 3,\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                style: {\n                  display: \"flex\",\n                  textAlign: \"center\",\n                  fontWeight: \"600\"\n                },\n                variant: \"body1\",\n                component: \"div\",\n                children: `Averaged Score: ${Math.round(peerReviewResult.averageScore)}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: \"20px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(CustomizedTabs, {\n            type3: true,\n            setTab: setTab,\n            value: tab,\n            labels: Array.from({\n              length: peerReviewResult.peerReview.length\n            }, (_, index) => `Review ${index + 1}`)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this), peerReviewResult.peerReview.map((review, key) => /*#__PURE__*/_jsxDEV(TabPanel, {\n            value: tab,\n            index: key,\n            children: /*#__PURE__*/_jsxDEV(CustomizedCard, {\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: [/*#__PURE__*/_jsxDEV(Stack, {\n                  direction: \"row\",\n                  justifyContent: \"space-between\",\n                  children: [/*#__PURE__*/_jsxDEV(CustomizedButtons, {\n                    type2: true,\n                    children: [\"Score : \", review.score]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(CustomizedButtons, {\n                    type3: true,\n                    model: \"download\",\n                    href: linkDownload,\n                    download: \"PeerReview.pdf\",\n                    children: \"Download Reviews\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 23\n                }, this), review.pdfDoc && /*#__PURE__*/_jsxDEV(Stack, {\n                  direction: \"row\",\n                  justifyContent: \"center\",\n                  alignItems: \"center\",\n                  p: 1,\n                  children: [/*#__PURE__*/_jsxDEV(CustomizedButtons, {\n                    model: \"arrowL\",\n                    style: {\n                      color: \"black\",\n                      marginBottom: \"10px\"\n                    },\n                    onClick: goToPreviousPage\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 190,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Document, {\n                    file: {\n                      data: review.pdfDoc\n                    },\n                    onLoadSuccess: onDocumentLoadSuccess,\n                    children: /*#__PURE__*/_jsxDEV(Page, {\n                      pageNumber: pageNumber,\n                      scale: scale\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 199,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(CustomizedButtons, {\n                    model: \"arrow\",\n                    style: {\n                      color: \"black\",\n                      marginBottom: \"10px\"\n                    },\n                    onClick: goToNextPage\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 25\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this)\n    }, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n}\n\n_s(StudentPeerReviewResultsDisplay, \"AgFd8QbXK4OwCSxC5Cs0IajKH6I=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c2 = StudentPeerReviewResultsDisplay;\nexport default StudentPeerReviewResultsDisplay;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TabPanel\");\n$RefreshReg$(_c2, \"StudentPeerReviewResultsDisplay\");","map":{"version":3,"sources":["/home/ductran/Desktop/CSC480-21F/frontend/src/main/frontend/src/pages/Student/StudentPeerReviewResultsDisplay.js"],"names":["React","useState","useEffect","CardContent","Grid","List","Stack","Typography","Box","CardHeader","Document","Page","pdfjs","NavBar","CustomizedButtons","bg","CustomizedCard","CustomizedContainer","Link","useSelector","useDispatch","selectUser","Loading","CustomizedPdfUploader","CustomizedBody","CustomizedTabs","getPeerReviewResulttByStudent","handleConvertByteArrayToPdf","TabPanel","props","children","value","index","other","borderRadius","StudentPeerReviewResultsDisplay","history","location","dispatch","getUser","user","isAuthenticated","authLoading","scale","setScale","numPages","setNumPages","pageNumber","setPageNumber","isLoading","setIsLoading","loading","setLoading","isFirstPage","isLastPage","tab","setTab","comments","setComments","assignment","setAssignment","submissionPdfFile","setSubmissionPdfFile","peerReviewResult","setPeerReviewResult","linkDownload","setLinkDownload","state","assignmentID","undefined","then","console","log","catch","err","peerReview","pdfDoc","onDocumentLoadSuccess","goToPreviousPage","goToNextPage","marginBottom","display","alignItems","textAlign","fontWeight","marginTop","Math","round","averageScore","Array","from","length","_","map","review","key","score","color","data"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n// @mui components\nimport {\n  CardContent,\n  Grid,\n  List,\n  Stack,\n  Typography,\n  Box,\n  CardHeader,\n} from \"@mui/material\";\n//PDF\nimport { Document, Page, pdfjs } from \"react-pdf\";\n\n// styled components\nimport NavBar from \"../../components/NavBar/NavBar\";\nimport CustomizedButtons from \"../../components/CustomizedButtons\";\n\nimport bg from \"../../images/multi_background_dashboard.jpg\";\n\nimport CustomizedCard from \"../../components/CustomizedCard\";\nimport CustomizedContainer from \"../../components/CustomizedContainer\";\nimport { Link } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectUser } from \"../../features/userSlice\";\nimport Loading from \"../../components/Loading\";\nimport CustomizedPdfUploader from \"../../components/CustomizedPdfUploader\";\nimport CustomizedBody from \"../../components/CustomizedBody\";\nimport CustomizedTabs from \"../../components/CustomizedTabs\";\nimport { getPeerReviewResulttByStudent } from \"../../axios/APIRequests\";\nimport { handleConvertByteArrayToPdf } from \"../../utils/byteArrayToPDF\";\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      sx={{ borderRadius: \"10px\" }}\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box>{children}</Box>}\n    </div>\n  );\n}\nfunction StudentPeerReviewResultsDisplay({ history, location }) {\n  const dispatch = useDispatch();\n  const getUser = useSelector(selectUser);\n  const { user, isAuthenticated, authLoading } = getUser;\n\n  const [scale, setScale] = useState(1.0);\n  const [numPages, setNumPages] = useState(null);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [isLoading, setIsLoading] = useState(true);\n  const [loading, setLoading] = useState(true);\n  const isFirstPage = pageNumber === 1;\n  const isLastPage = pageNumber === numPages;\n  const [tab, setTab] = useState(0);\n  // ========= main variable =======\n  const [comments, setComments] = React.useState(\"\");\n  const [assignment, setAssignment] = useState();\n  const [submissionPdfFile, setSubmissionPdfFile] = useState(null);\n  const [peerReviewResult, setPeerReviewResult] = useState();\n  const [linkDownload, setLinkDownload] = useState();\n  useEffect(() => {\n    if (location.state.assignmentID == undefined) return;\n    var assignmentID = location.state.assignmentID;\n    getPeerReviewResulttByStudent(assignmentID)\n      .then((value) => {\n        console.log(value);\n        if (peerReviewResult === undefined) {\n          setPeerReviewResult(value);\n        }\n        setLoading(false);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n  useEffect(() => {\n   \n    if(peerReviewResult !== undefined){\n     //console.log(peerReviewResult.peerReview[tab].pdfDoc)\n      setLinkDownload(handleConvertByteArrayToPdf(peerReviewResult.peerReview[tab].pdfDoc));\n    }\n  }, [peerReviewResult,tab])\n  // for submit event\n  function onDocumentLoadSuccess({ numPages }) {\n    setNumPages(numPages);\n    setIsLoading(false);\n  }\n  const goToPreviousPage = () => {\n    if (!isFirstPage) setPageNumber(pageNumber - 1);\n  };\n  const goToNextPage = () => {\n    if (!isLastPage) setPageNumber(pageNumber + 1);\n  };\n\n  return (\n    <CustomizedBody bg={bg}>\n      <NavBar fixed history={history}></NavBar>\n      {loading === true ? (\n        <Loading />\n      ) : (\n        <>\n          <CustomizedContainer>\n            <Grid\n              container\n              sx={{\n                marginBottom: \"20px\",\n                display: \"flex\",\n                alignItems: \"center\",\n              }}\n              spacing={9}\n            >\n              <Grid item xs={9}>\n                <Typography\n                  style={{\n                    display: \"flex\",\n                    textAlign: \"center\",\n                    fontWeight: \"600\",\n                  }}\n                  variant=\"h6\"\n                  component=\"div\"\n                >\n                  Peer Review Results\n                </Typography>\n              </Grid>\n            </Grid>\n            <CustomizedCard style={{ marginTop: \"20px\" }}>\n              <CardContent>\n                <Stack\n                  direction=\"row\"\n                  justifyContent=\"space-between\"\n                  alignItems=\"center\"\n                  spacing={3}\n                >\n                  <Typography\n                    style={{\n                      display: \"flex\",\n                      textAlign: \"center\",\n                      fontWeight: \"600\",\n                    }}\n                    variant=\"body1\"\n                    component=\"div\"\n                  >\n                    {`Averaged Score: ${Math.round(\n                    peerReviewResult.averageScore\n                  )}`}\n                  </Typography>\n                </Stack>\n              </CardContent>\n            </CustomizedCard>\n            <div style={{ marginTop: \"20px\" }}>\n              <CustomizedTabs\n                type3\n                setTab={setTab}\n                value={tab}\n                labels={Array.from(\n                  { length: peerReviewResult.peerReview.length },\n                  (_, index) => `Review ${index + 1}`\n                )}\n              ></CustomizedTabs>\n              {peerReviewResult.peerReview.map((review, key) => (\n                <TabPanel value={tab} index={key}>\n                  <CustomizedCard>\n                    <CardContent>\n                      <Stack direction=\"row\" justifyContent=\"space-between\">\n                        <CustomizedButtons type2>\n                          Score : {review.score}\n                        </CustomizedButtons>\n                        <CustomizedButtons\n                          type3\n                          model={\"download\"}\n                          href={linkDownload}\n                          download={\"PeerReview.pdf\"}\n                        >\n                          Download Reviews\n                        </CustomizedButtons>\n                      </Stack>\n                      {review.pdfDoc && (\n                        <Stack\n                          direction=\"row\"\n                          justifyContent=\"center\"\n                          alignItems=\"center\"\n                          p={1}\n                        >\n                          <CustomizedButtons\n                            model={\"arrowL\"}\n                            style={{ color: \"black\", marginBottom: \"10px\" }}\n                            onClick={goToPreviousPage}\n                          ></CustomizedButtons>\n                          <Document\n                            file={{ data: review.pdfDoc }}\n                            onLoadSuccess={onDocumentLoadSuccess}\n                          >\n                            <Page pageNumber={pageNumber} scale={scale} />\n                          </Document>\n                          <CustomizedButtons\n                            model={\"arrow\"}\n                            style={{ color: \"black\", marginBottom: \"10px\" }}\n                            onClick={goToNextPage}\n                          ></CustomizedButtons>\n                        </Stack>\n                      )}{\" \"}\n                    </CardContent>\n                  </CustomizedCard>\n                </TabPanel>\n              ))}\n            </div>\n          </CustomizedContainer>\n        </>\n      )}\n    </CustomizedBody>\n  );\n}\n\nexport default StudentPeerReviewResultsDisplay;\n"]},"metadata":{},"sourceType":"module"}