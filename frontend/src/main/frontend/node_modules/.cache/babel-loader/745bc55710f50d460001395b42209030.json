{"ast":null,"code":"import _objectSpread from\"/home/ductran/guide-rest-client-reactjs/start/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/ductran/guide-rest-client-reactjs/start/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";// @mui components\nimport{Grid,Card,CardHeader,CardContent,Container,Typography,Box,Stack,Radio,Breadcrumbs}from\"@mui/material\";// styled components\nimport NavBar from\"../../components/NavBar/NavBar\";import CustomizedButtons from\"../../components/CustomizedButtons\";import bg from\"../../images/multi_background_dashboard.jpg\";import TextField from\"@mui/material/TextField\";import CustomizedBody from\"../../components/CustomizedBody\";// Worker\nimport{Document,Page,pdfjs}from\"react-pdf\";import{useSelector,useDispatch}from\"react-redux\";import CustomizedContainer from\"../../components/CustomizedContainer\";import CustomizedTextField from\"../../components/CustomizedTextField\";import CustomizedRadios from\"../../components/CustomizedRadios\";import CustomizedCard from\"../../components/CustomizedCard\";import AssignmentViewer from\"./AssignmentViewer\";import CustomizedPdfUploader from\"../../components/CustomizedPdfUploader\";import AdapterDateFns from\"@mui/lab/AdapterDateFns\";import LocalizationProvider from\"@mui/lab/LocalizationProvider\";import DateTimePicker from\"@mui/lab/DateTimePicker\";import{postNewAssignmentByProfessor}from\"../../axios/APIRequests\";import{ConsoleView}from\"react-device-detect\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";pdfjs.GlobalWorkerOptions.workerSrc=\"//cdnjs.cloudflare.com/ajax/libs/pdf.js/\".concat(pdfjs.version,\"/pdf.worker.js\");function AssignmentCreation(_ref){var history=_ref.history,location=_ref.location;var _useState=useState(),_useState2=_slicedToArray(_useState,2),newAssignment=_useState2[0],setNewAssignment=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),solutionPdfFile=_useState6[0],setSolutionPdfFile=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),peerReviewPdfFile=_useState8[0],setPeerReviewPdfFile=_useState8[1];var _useState9=useState(new Date()),_useState10=_slicedToArray(_useState9,2),solutionDueDate=_useState10[0],setSolutionDueDate=_useState10[1];var _useState11=useState(new Date()),_useState12=_slicedToArray(_useState11,2),prDueDate=_useState12[0],setPRDueDate=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),solutionPdfFileName=_useState14[0],setSolutionPdfFileName=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),peerReviewPdfFileName=_useState16[0],setPeerReviewPdfFileName=_useState16[1];var ErrorMessage=\"Please fill out !!!\";var _useState17=useState(true),_useState18=_slicedToArray(_useState17,2),disablePublishBtn=_useState18[0],setDisablePublishBtn=_useState18[1];useEffect(function(){if(location.state.assignment==undefined)return;var assignment=location.state.assignment;console.log(assignment);setTitle(assignment.title);setSolutionDueDate(new Date(assignment.solutionDueDateTime));setPRDueDate(new Date(assignment.peerReviewDueDateTime));setSolutionPdfFileName(assignment.solutionPdfFileName);setPeerReviewPdfFileName(assignment.peerReviewPdfFileName);setSolutionPdfFile(assignment.solutionPdfDoc);setPeerReviewPdfFile(assignment.peerReviewPdfDoc);if(title===\"\"||solutionPdfFile.length===0||peerReviewPdfFile.length===0){setDisablePublishBtn(true);return;}setDisablePublishBtn(false);},[]);useEffect(function(){var generateAssignment=function generateAssignment(){setNewAssignment({courseID:location.state.courseID,settings:\"settings\",title:title,draft:true,solutionPdfDoc:solutionPdfFile,peerReviewPdfDoc:peerReviewPdfFile,solutionPdfFileName:solutionPdfFileName,peerReviewPdfFileName:peerReviewPdfFileName,solutionDueDateTime:solutionDueDate.toJSON().split(\".\")[0],peerReviewDueDateTime:prDueDate.toJSON().split(\".\")[0]});};generateAssignment();},[title,solutionPdfFile,peerReviewPdfFile,solutionPdfFileName,peerReviewPdfFileName,solutionDueDate,prDueDate]);var handlePreview=function handlePreview(){if(title===\"\"||solutionPdfFile.length===0||peerReviewPdfFile.length===0){alert(ErrorMessage);}else{var assignment={courseID:location.state.courseID,settings:\"settings\",title:title,solutionPdfDoc:solutionPdfFile,peerReviewPdfDoc:peerReviewPdfFile,solutionPdfFileName:solutionPdfFileName,peerReviewPdfFileName:peerReviewPdfFileName,solutionDueDateTime:solutionDueDate,peerReviewDueDateTime:prDueDate};console.log(assignment);history.push(\"./assignmentviewer\",{assignment:assignment,courseID:location.state.courseID});}};var handleSaveDraft=function handleSaveDraft(){if(title===\"\"||solutionPdfFile.length===0||peerReviewPdfFile.length===0){alert(ErrorMessage);}else{var json=JSON.stringify(newAssignment);console.log(json);postNewAssignmentByProfessor(newAssignment).then(function(response){console.log(response);history.push(\"/course\");}).catch(function(error){console.log(error);});}};var handlePublish=function handlePublish(){if(title===\"\"||solutionPdfFile.length===0||peerReviewPdfFile.length===0){alert(ErrorMessage);}else{var tempAss=_objectSpread(_objectSpread({},newAssignment),{},{draft:false});console.log(tempAss);var json=JSON.stringify(tempAss);console.log(json);postNewAssignmentByProfessor(tempAss).then(function(response){console.log(response);history.push(\"/course\");}).catch(function(error){console.log(error);});}};return/*#__PURE__*/_jsxs(CustomizedBody,{bg:bg,children:[/*#__PURE__*/_jsx(NavBar,{fixed:true}),/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(CustomizedContainer,{children:[/*#__PURE__*/_jsxs(Breadcrumbs,{\"aria-label\":\"breadcrumb\",mb:5,ml:2,children:[/*#__PURE__*/_jsx(Typography,{color:\"text.primary\",children:\"Home\"}),/*#__PURE__*/_jsx(Typography,{color:\"text.primary\",children:\"Courses\"}),/*#__PURE__*/_jsx(Typography,{color:\"text.primary\",children:\"Course Name\"}),/*#__PURE__*/_jsx(Typography,{color:\"text.primary\",style:{fontWeight:\"600\"},children:\"New Assignment\"})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{style:{fontWeight:\"600\"},variant:\"body1\",component:\"div\",children:\"Build New Assignment\"}),/*#__PURE__*/_jsx(CustomizedButtons,{type2:true,onClick:handlePreview,children:\"Preview\"})]}),/*#__PURE__*/_jsx(CustomizedCard,{sx:{marginBottom:\"30px\",marginTop:\"30px\"},children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Stack,{direction:\"column\",spacing:2,children:[/*#__PURE__*/_jsx(Typography,{style:{fontWeight:\"600\"},variant:\"body1\",component:\"div\",children:\"Title Assignment:\"}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,children:[/*#__PURE__*/_jsx(CustomizedTextField,{value:title,handleTextFieldChange:setTitle,children:\"Title\"}),/*#__PURE__*/_jsx(Typography,{style:{display:\"flex\",alignItems:\"center\",fontWeight:\"600\"},variant:\"body1\",component:\"div\",children:\"\\u2018Solution\\u2019 and \\u2018Peer Review\\u2019 will be added to title in their respective phases.\"})]})]})})}),/*#__PURE__*/_jsx(CustomizedCard,{sx:{marginBottom:\"30px\"},children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Stack,{direction:\"column\",spacing:2,children:[/*#__PURE__*/_jsx(Typography,{style:{display:\"flex\",flexDirection:\"row\",fontWeight:\"600\"},variant:\"body1\",component:\"div\",children:\"Solution Assignment Content:\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",component:\"div\",children:\"Please set the due date and upload instruction PDFs to be displayed within solution assignment.\"}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,sx:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,children:/*#__PURE__*/_jsx(DateTimePicker,{renderInput:function renderInput(props){return/*#__PURE__*/_jsx(TextField,_objectSpread({},props));},label:\"Solution Due Date\",value:solutionDueDate,onChange:function onChange(newValue){setSolutionDueDate(newValue);}})}),/*#__PURE__*/_jsx(CustomizedPdfUploader,{id:\"solution\",pdfFileName:solutionPdfFileName,setPdfFileName:setSolutionPdfFileName,setPdfFile:setSolutionPdfFile})]})]})})}),/*#__PURE__*/_jsx(CustomizedCard,{sx:{marginBottom:\"30px\"},children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Stack,{direction:\"column\",spacing:2,children:[/*#__PURE__*/_jsx(Typography,{style:{display:\"flex\",flexDirection:\"row\",fontWeight:\"600\"},variant:\"body1\",component:\"div\",children:\"Peer Review Assignment Content:\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",component:\"div\",children:\"Please set the due date and upload instruction PDFs to be displayed within Peer Review Assignment. Please note that peer reviews must be manually sent for review by professors after quality checking.\"}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,sx:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,children:/*#__PURE__*/_jsx(DateTimePicker,{renderInput:function renderInput(props){return/*#__PURE__*/_jsx(TextField,_objectSpread({},props));},label:\"Peer Review Due Date\",value:prDueDate,onChange:function onChange(newValue){setPRDueDate(newValue);}})}),/*#__PURE__*/_jsx(CustomizedPdfUploader,{id:\"peerReview\",pdfFileName:peerReviewPdfFileName,setPdfFileName:setPeerReviewPdfFileName,setPdfFile:setPeerReviewPdfFile})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sx:{display:\"flex\",justifyContent:\"flex-end\",margintop:\"10px\"},children:/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,children:[/*#__PURE__*/_jsx(CustomizedButtons,{type2:true,model:\"type2\",onClick:handleSaveDraft,children:\"Save Draft\"}),/*#__PURE__*/_jsx(CustomizedButtons,{onClick:handlePublish,type1:true,children:\"Publish\"})]})})]})})]});}export default AssignmentCreation;","map":{"version":3,"sources":["/home/ductran/guide-rest-client-reactjs/start/src/main/frontend/src/pages/Professor/AssignmentCreation.js"],"names":["React","useState","useEffect","Link","Grid","Card","CardHeader","CardContent","Container","Typography","Box","Stack","Radio","Breadcrumbs","NavBar","CustomizedButtons","bg","TextField","CustomizedBody","Document","Page","pdfjs","useSelector","useDispatch","CustomizedContainer","CustomizedTextField","CustomizedRadios","CustomizedCard","AssignmentViewer","CustomizedPdfUploader","AdapterDateFns","LocalizationProvider","DateTimePicker","postNewAssignmentByProfessor","ConsoleView","GlobalWorkerOptions","workerSrc","version","AssignmentCreation","history","location","newAssignment","setNewAssignment","title","setTitle","solutionPdfFile","setSolutionPdfFile","peerReviewPdfFile","setPeerReviewPdfFile","Date","solutionDueDate","setSolutionDueDate","prDueDate","setPRDueDate","solutionPdfFileName","setSolutionPdfFileName","peerReviewPdfFileName","setPeerReviewPdfFileName","ErrorMessage","disablePublishBtn","setDisablePublishBtn","state","assignment","undefined","console","log","solutionDueDateTime","peerReviewDueDateTime","solutionPdfDoc","peerReviewPdfDoc","length","generateAssignment","courseID","settings","draft","toJSON","split","handlePreview","alert","push","handleSaveDraft","json","JSON","stringify","then","response","catch","error","handlePublish","tempAss","fontWeight","marginBottom","marginTop","display","alignItems","flexDirection","props","newValue","justifyContent","margintop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\n// @mui components\nimport {\n  Grid,\n  Card,\n  CardHeader,\n  CardContent,\n  Container,\n  Typography,\n  Box,\n  Stack,\n  Radio,\n  Breadcrumbs,\n} from \"@mui/material\";\n// styled components\nimport NavBar from \"../../components/NavBar/NavBar\";\nimport CustomizedButtons from \"../../components/CustomizedButtons\";\nimport bg from \"../../images/multi_background_dashboard.jpg\";\nimport TextField from \"@mui/material/TextField\";\nimport CustomizedBody from \"../../components/CustomizedBody\";\n// Worker\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport CustomizedContainer from \"../../components/CustomizedContainer\";\nimport CustomizedTextField from \"../../components/CustomizedTextField\";\nimport CustomizedRadios from \"../../components/CustomizedRadios\";\nimport CustomizedCard from \"../../components/CustomizedCard\";\nimport AssignmentViewer from \"./AssignmentViewer\";\nimport CustomizedPdfUploader from \"../../components/CustomizedPdfUploader\";\nimport AdapterDateFns from \"@mui/lab/AdapterDateFns\";\nimport LocalizationProvider from \"@mui/lab/LocalizationProvider\";\nimport DateTimePicker from \"@mui/lab/DateTimePicker\";\nimport { postNewAssignmentByProfessor } from \"../../axios/APIRequests\";\nimport { ConsoleView } from \"react-device-detect\";\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n\nfunction AssignmentCreation({ history, location }) {\n  const [newAssignment, setNewAssignment] = useState();\n  const [title, setTitle] = useState(\"\");\n  const [solutionPdfFile, setSolutionPdfFile] = useState([]);\n  const [peerReviewPdfFile, setPeerReviewPdfFile] = useState([]);\n  const [solutionDueDate, setSolutionDueDate] = useState(new Date());\n  const [prDueDate, setPRDueDate] = useState(new Date());\n  const [solutionPdfFileName, setSolutionPdfFileName] = useState(\"\");\n  const [peerReviewPdfFileName, setPeerReviewPdfFileName] = useState(\"\");\n  var ErrorMessage = \"Please fill out !!!\"\n  const [disablePublishBtn, setDisablePublishBtn] = useState(true)\n  useEffect(() => {\n    if (location.state.assignment == undefined) return\n      var assignment = location.state.assignment;\n      console.log(assignment)\n      setTitle(assignment.title);\n      setSolutionDueDate(new Date(assignment.solutionDueDateTime))\n      setPRDueDate(new Date(assignment.peerReviewDueDateTime))\n      setSolutionPdfFileName(assignment.solutionPdfFileName)\n      setPeerReviewPdfFileName(assignment.peerReviewPdfFileName)\n      setSolutionPdfFile(assignment.solutionPdfDoc)\n      setPeerReviewPdfFile(assignment.peerReviewPdfDoc)\n\n    if ( title === \"\" || solutionPdfFile.length === 0 ||  peerReviewPdfFile.length === 0) {\n      setDisablePublishBtn(true)  \n      return\n    }\n    setDisablePublishBtn(false)\n  }, []);\n\n  useEffect(() => {\n    const generateAssignment = () => {\n      setNewAssignment({\n        courseID: location.state.courseID,\n        settings: \"settings\",\n        title: title,\n        draft: true,\n        solutionPdfDoc: solutionPdfFile,\n        peerReviewPdfDoc: peerReviewPdfFile,\n        solutionPdfFileName : solutionPdfFileName,\n        peerReviewPdfFileName:peerReviewPdfFileName,\n        solutionDueDateTime: solutionDueDate.toJSON().split(\".\")[0],\n        peerReviewDueDateTime: prDueDate.toJSON().split(\".\")[0],\n      });\n    };\n    \n    generateAssignment();\n  }, [title, solutionPdfFile, peerReviewPdfFile,solutionPdfFileName,peerReviewPdfFileName, solutionDueDate, prDueDate]);\n\n  const handlePreview = () => {\n    \n    if (\n      title === \"\" ||\n      solutionPdfFile.length === 0 ||\n      peerReviewPdfFile.length === 0\n    ) {\n        alert(ErrorMessage)\n    } else{\n      var assignment = {\n        courseID: location.state.courseID,\n        settings: \"settings\",\n        title: title,\n        solutionPdfDoc: solutionPdfFile,\n        peerReviewPdfDoc: peerReviewPdfFile,\n        solutionPdfFileName : solutionPdfFileName,\n        peerReviewPdfFileName:peerReviewPdfFileName,\n        solutionDueDateTime: solutionDueDate,\n        peerReviewDueDateTime: prDueDate,\n      }\n      console.log(assignment)\n        history.push(\"./assignmentviewer\", {assignment: assignment , \n          courseID: location.state.courseID \n        })\n    }\n   \n  }\n  const handleSaveDraft = () => {\n    if (\n      title === \"\" ||\n      solutionPdfFile.length === 0 ||\n      peerReviewPdfFile.length === 0\n    ) {\n      alert(ErrorMessage)\n    } else {\n      const json = JSON.stringify(newAssignment);\n      console.log(json);\n      postNewAssignmentByProfessor(newAssignment)\n        .then(function (response) {\n          console.log(response);\n          history.push(\"/course\");\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    }\n  };\n  const handlePublish = () => {\n    if (\n      title === \"\" ||\n      solutionPdfFile.length === 0 ||\n      peerReviewPdfFile.length === 0\n    ) {\n      alert(ErrorMessage)\n    } else {\n      var tempAss = {...newAssignment, draft: false}\n      console.log(tempAss)\n      const json = JSON.stringify(tempAss);\n      console.log(json);\n      postNewAssignmentByProfessor(tempAss)\n        .then(function (response) {\n          console.log(response);\n          history.push(\"/course\");\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    }\n  };\n\n  return (\n    <CustomizedBody bg={bg}>\n      <NavBar fixed></NavBar>\n      <>\n      <CustomizedContainer>\n            <Breadcrumbs aria-label=\"breadcrumb\" mb={5} ml={2}>\n              <Typography color=\"text.primary\">Home</Typography>\n              <Typography color=\"text.primary\">Courses</Typography>\n              <Typography color=\"text.primary\">Course Name</Typography>\n              <Typography color=\"text.primary\" style={{ fontWeight: \"600\" }}>\n                New Assignment\n              </Typography>\n            </Breadcrumbs>\n            <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\n\n                <Typography\n                  style={{ fontWeight: \"600\" }}\n                  variant=\"body1\"\n                  component=\"div\"\n                >\n                  Build New Assignment\n                </Typography>\n                <CustomizedButtons\n                  type2\n                  onClick={handlePreview}\n                >\n                  Preview\n                </CustomizedButtons>\n            </Stack>\n\n            {/* First Box */}\n            <CustomizedCard sx={{ marginBottom: \"30px\", marginTop: \"30px\" }}>\n              <CardContent>\n                <Stack direction=\"column\" spacing={2}>\n                  <Typography\n                    style={{\n                      fontWeight: \"600\",\n                    }}\n                    variant=\"body1\"\n                    component=\"div\"\n                  >\n                    Title Assignment:\n                  </Typography>\n                  <Stack direction=\"row\" spacing={2}>\n                    <CustomizedTextField\n                      value={title}\n                      handleTextFieldChange={setTitle}\n                    >\n                      Title\n                    </CustomizedTextField>\n                    <Typography\n                      style={{\n                        display: \"flex\",\n                        alignItems: \"center\",\n                        fontWeight: \"600\",\n                      }}\n                      variant=\"body1\"\n                      component=\"div\"\n                    >\n                      ‘Solution’ and ‘Peer Review’ will be added to title in\n                      their respective phases.\n                    </Typography>\n                  </Stack>\n                </Stack>\n              </CardContent>\n            </CustomizedCard>\n\n            {/* second box */}\n            <CustomizedCard sx={{ marginBottom: \"30px\" }}>\n              <CardContent>\n                <Stack direction=\"column\" spacing={2}>\n                  <Typography\n                    style={{\n                      display: \"flex\",\n                      flexDirection: \"row\",\n                      fontWeight: \"600\",\n                    }}\n                    variant=\"body1\"\n                    component=\"div\"\n                  >\n                    Solution Assignment Content:\n                  </Typography>\n                  <Typography variant=\"body2\" component=\"div\">\n                    Please set the due date and upload instruction PDFs to be\n                    displayed within solution assignment.\n                  </Typography>\n                  <Stack\n                    direction=\"row\"\n                    spacing={2}\n                    sx={{ display: \"flex\", alignItems: \"center\" }}\n                  >\n                    <LocalizationProvider dateAdapter={AdapterDateFns}>\n                      <DateTimePicker\n                        renderInput={(props) => <TextField {...props} />}\n                        label=\"Solution Due Date\"\n                        value={solutionDueDate}\n                        onChange={(newValue) => {\n                          setSolutionDueDate(newValue);\n                        }}\n                      />\n                    </LocalizationProvider>\n                    <CustomizedPdfUploader\n                      id=\"solution\"\n                      pdfFileName={solutionPdfFileName}\n                      setPdfFileName={setSolutionPdfFileName}\n                      setPdfFile={setSolutionPdfFile}\n                    ></CustomizedPdfUploader>\n                  </Stack>\n                </Stack>\n              </CardContent>\n            </CustomizedCard>\n\n            {/* third box */}\n            <CustomizedCard sx={{ marginBottom: \"30px\" }}>\n              <CardContent>\n                <Stack direction=\"column\" spacing={2}>\n                  <Typography\n                    style={{\n                      display: \"flex\",\n                      flexDirection: \"row\",\n                      fontWeight: \"600\",\n                    }}\n                    variant=\"body1\"\n                    component=\"div\"\n                  >\n                    Peer Review Assignment Content:\n                  </Typography>\n                  <Typography variant=\"body2\" component=\"div\">\n                    Please set the due date and upload instruction PDFs to be\n                    displayed within Peer Review Assignment. Please note that\n                    peer reviews must be manually sent for review by professors\n                    after quality checking.\n                  </Typography>\n                  <Stack\n                    direction=\"row\"\n                    spacing={2}\n                    sx={{ display: \"flex\", alignItems: \"center\" }}\n                  >\n                    <LocalizationProvider dateAdapter={AdapterDateFns}>\n                      <DateTimePicker\n                        renderInput={(props) => <TextField {...props} />}\n                        label=\"Peer Review Due Date\"\n                        value={prDueDate}\n                        onChange={(newValue) => {\n                          setPRDueDate(newValue);\n                        }}\n                      />\n                    </LocalizationProvider>\n                    <CustomizedPdfUploader\n                      id=\"peerReview\"\n                      pdfFileName={peerReviewPdfFileName}\n                      setPdfFileName={setPeerReviewPdfFileName}\n                      setPdfFile={setPeerReviewPdfFile}\n                    ></CustomizedPdfUploader>\n                  </Stack>\n                </Stack>\n              </CardContent>\n            </CustomizedCard>\n\n            <Grid\n              item\n              xs={12}\n              sx={{\n                display: \"flex\",\n                justifyContent: \"flex-end\",\n                margintop: \"10px\",\n              }}\n            >\n              <Stack direction=\"row\" spacing={2}>\n                <CustomizedButtons type2 model={\"type2\"} onClick={handleSaveDraft}>\n                Save Draft\n              </CustomizedButtons>\n              <CustomizedButtons onClick={handlePublish} type1 >\n                Publish\n              </CustomizedButtons>\n              </Stack>\n              \n            </Grid>\n          </CustomizedContainer>\n      </>\n    </CustomizedBody>\n  );\n}\n\nexport default AssignmentCreation;\n"]},"metadata":{},"sourceType":"module"}