{"ast":null,"code":"import _slicedToArray from\"/home/ductran/guide-rest-client-reactjs/start/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Document,Page,pdfjs}from'react-pdf';import PDFControlBar from'./PDFControlBar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";pdfjs.GlobalWorkerOptions.workerSrc=\"//cdnjs.cloudflare.com/ajax/libs/pdf.js/\".concat(pdfjs.version,\"/pdf.worker.js\");var PDFReader=function PDFReader(){var _useState=useState(1.0),_useState2=_slicedToArray(_useState,2),scale=_useState2[0],setScale=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),numPages=_useState4[0],setNumPages=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),pageNumber=_useState6[0],setPageNumber=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];// for onchange event\nvar _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),pdfFile=_useState10[0],setPdfFile=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),pdfFileError=_useState12[0],setPdfFileError=_useState12[1];// for submit event\nvar _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),viewPdf=_useState14[0],setViewPdf=_useState14[1];function onDocumentLoadSuccess(_ref){var numPages=_ref.numPages;setNumPages(numPages);setIsLoading(false);}var fileType=['application/pdf'];var handlePdfFileChange=function handlePdfFileChange(e){var selectedFile=e.target.files[0];if(selectedFile){if(selectedFile&&fileType.includes(selectedFile.type)){var reader=new FileReader();reader.readAsDataURL(selectedFile);reader.onloadend=function(e){setPdfFile(e.target.result);setPdfFileError('');};}else{setPdfFile(null);setPdfFileError('Please select valid pdf file');}}else{console.log('select your file');}};var handlePdfFileSubmit=function handlePdfFileSubmit(e){e.preventDefault();if(pdfFile!==null){setViewPdf(pdfFile);}else{setViewPdf(null);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePdfFileSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control\",required:true,onChange:handlePdfFileChange}),pdfFileError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-msg\",children:pdfFileError}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Preview\"})]}),viewPdf&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PDFControlBar,{scale:scale,setScale:setScale,numPages:numPages,pageNumber:pageNumber,setPageNumber:setPageNumber,file:viewPdf}),/*#__PURE__*/_jsx(Document,{file:viewPdf,onLoadSuccess:onDocumentLoadSuccess,children:/*#__PURE__*/_jsx(Page,{pageNumber:pageNumber,scale:scale})})]})]});};export default PDFReader;","map":{"version":3,"sources":["/home/ductran/guide-rest-client-reactjs/start/src/main/frontend/src/components/PDFhandling/PDFReader.js"],"names":["React","useState","Document","Page","pdfjs","PDFControlBar","GlobalWorkerOptions","workerSrc","version","PDFReader","scale","setScale","numPages","setNumPages","pageNumber","setPageNumber","isLoading","setIsLoading","pdfFile","setPdfFile","pdfFileError","setPdfFileError","viewPdf","setViewPdf","onDocumentLoadSuccess","fileType","handlePdfFileChange","e","selectedFile","target","files","includes","type","reader","FileReader","readAsDataURL","onloadend","result","console","log","handlePdfFileSubmit","preventDefault"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Document, Page, pdfjs } from 'react-pdf';\nimport PDFControlBar from './PDFControlBar';\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n\nconst PDFReader = () => {\n  const [scale, setScale] = useState(1.0);\n  const [numPages, setNumPages] = useState(null);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [isLoading, setIsLoading] = useState(true);\n  // for onchange event\n  const [pdfFile, setPdfFile]=useState(null);\n  const [pdfFileError, setPdfFileError]=useState('');\n\n  // for submit event\n  const [viewPdf, setViewPdf]=useState(null);\n  function onDocumentLoadSuccess({ numPages }) {\n    setNumPages(numPages);\n    setIsLoading(false);\n  }\n  const fileType=['application/pdf'];\n  const handlePdfFileChange=(e)=>{\n    let selectedFile=e.target.files[0];\n    if(selectedFile){\n      if(selectedFile&&fileType.includes(selectedFile.type)){\n        let reader = new FileReader();\n            reader.readAsDataURL(selectedFile);\n            reader.onloadend = (e) =>{\n              setPdfFile(e.target.result);\n              setPdfFileError('');\n            }\n      }\n      else{\n        setPdfFile(null);\n        setPdfFileError('Please select valid pdf file');\n      }\n    }\n    else{\n      console.log('select your file');\n    }\n  }\n  const handlePdfFileSubmit=(e)=>{\n    e.preventDefault();\n    if(pdfFile!==null){\n      setViewPdf(pdfFile);\n    }\n    else{\n      setViewPdf(null);\n    }\n  }\n  return (\n    <div>\n      <form onSubmit={handlePdfFileSubmit}>\n        <input type=\"file\" className='form-control'\n          required onChange={handlePdfFileChange}\n        />\n        {pdfFileError&&<div className='error-msg'>{pdfFileError}</div>}\n        <br></br>\n        <button type=\"submit\" >\n          Preview\n        </button>\n      </form>\n      {viewPdf&&<>\n        <PDFControlBar\n          scale={scale}\n          setScale={setScale}\n          numPages={numPages}\n          pageNumber={pageNumber}\n          setPageNumber={setPageNumber}\n          file={viewPdf}\n        />\n        <Document\n          file={viewPdf}\n          onLoadSuccess={onDocumentLoadSuccess}\n        >\n          <Page pageNumber={pageNumber} scale={scale} />\n        </Document>\n      </>}\n      \n    </div>\n  );\n};\n\nexport default PDFReader;\n"]},"metadata":{},"sourceType":"module"}